<html><head><title>Slide 5 - Tutorial on Database Schema</title><meta charset="UTF-8"></head>

<body text="#202020">

<font color=blue face=Verdana size=2>
<!-- end Standard Header - Version 3-->

<!-- begin body Text -->
<b>Tutorial on Database Schema - Slide 5</b> - Primary and Foreign Keys and Relationships.
<br><br><a href="tutorial_slide_4.html">Back</a>&nbsp;&nbsp;&nbsp;<a href="tutorial_slide_6.html">Next Slide</a>

<br><br>
<!--- <img alt="Customers and Products Data Model" src="images/customers_and_products_dezign.gif"> --->

<font color=blue face=Verdana size=2>

<OL>
<b><li>Keys</b>
<UL><li>Primary and Foreign Keys</UL>

<b><li>Relationships</b>
<UL><li>One-to-Many and Many-to-Many Relationships</UL>

</OL>


<img alt="Ordering in Starbucks" src="images/ordering_in_starbucks.gif">
<br>
<hr>
I would like to start by defining some basic conventions.
<br>
<b>Primary Keys.</b>
<li>These are indicated by <b>'PK'</b> alongside the field in a Table.
<li>They show the field that identifies the record uniquely.
<li>For example, the 'product_id' for a Product and an 'order_id' for an Order.
<li>The values are usually generated by an 'Auto-Increment' field.
<li>They don't have any intrinsic meaning and are simply integers generated automatically one after another.
<br><br>
<b>Primary/Foreign Keys.</b>
<li>These are indicated by <b>'PF'</b> alongside the field in a Table.
<li>In this case, the field also exists as a Primary Key in another Table.
<li>In our example, the Primary Key in the 'Customer_Orders_Products' Table is a Composite Key, made up of two Fields.
<li>The 'product_id' is the Primary Key in the 'Products' Table, and the 'order_id' is the Primary Key in the 'Customer_Orders' Table.

<br><br>
<b>Foreign Keys.</b>
<li>These are indicated by 'FK' alongside the field in a Table.
<li>They show a reference to the Primary Key for a record in another Table.
<li>For example, the 'customer_id' in the Customer_Orders Table is linked to
a 'customer_id' in the Customer Table (not shown).

<br><br>

<b>One-to-Many Relationships.</b>
<li>One-to-Many Relationships are very common in the real world, and can be read that 'One' Parent can have 'Many' children.
<li>In this diagram, One Product can be associated with Many Customer_Orders_Products.

<li>The line between Products and Customer_Orders_Products is a continuous line (not a dotted line).
<li>This means that the 'product_id' field is a Primary Key in the Customer_Orders_Products Table.
<li>A dotted line would indicate the existence of a Foreign Key (which is defined above).
<br><b>'Crows-Feet'</b>
<li>At the Customer_Orders_Products end, there is what's called a 'Crows-Feet' symbol.
<li>This indicates the 'Many' aspect of the relationship.
<li>The little 'o' shows that this is an Optional relationship.
<li>In other words, not every Product has an associated record in the Customer_Orders_Products Table.
<li>This applies, of course, to Products that nobody orders.
<li>At the other end of the line there is a small horizontal line. This means that this is essential.
<li>In other words, every product_id in the Customer_Orders_Products Table must match a product_id in the products Table.
<li>This means that a Customer cannot order a Product that does not exist.
<li>In passing, let me say that this is different from the Product not being in stock.
<li>This aspect is called Inventory Control and is covered by a different Database Schema.
<li>The Relationship between Customer_Orders and Customer_Orders_Products shows a short horizontal line at each end.
<li>This indicates that every Order must contain at least one Product.
<li>It also indicates that Product in every Customer_Orders_Products must be associated with an Order in Customer_Orders.

<br><br>
<b>Many-to-Many Relationships.</b>
<li>Many-to-Many Relationships are very important in the real world, and we see them all around us every day.
<li>In our example, many Customers can order the same Product.
<li>Many Products can be ordered by the same Customer.
<li>This is called a Many-to-Many Relationship. It cannot be implemented directly in a Table in a Relational Database.
<li>The solution is to create an intermediate table that records all combinations that exist of Customer and Product.
<li>For example, if a Customer ordered three Products, then there would be three records for that Customer in this intermediate table.
<li>The combination of the Primary keys in the parent Tables become the Primary key in this intermediate table.
<li>We also need to allow for Comments like 'Make it extra strong, please'.
<li>If we get the structure to the Database right, then it's straightforward to extend it.
<!---
<li>The important point here is that this design allows the Customer to place many Orders at Starbucks.
<li>Which is just as well !!!
--->

<hr>

<br><I> &#169 DataBaseAnswers.org 2006</I></font>

</body>

</html>

